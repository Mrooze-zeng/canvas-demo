{"version":3,"sources":["Components/Anchor.js","Utils/cloneShapeTypeFactory.js","Utils/drawGrid.js","Utils/drawSelectAreaLine.js","Utils/generateId.js","Utils/parseStyle.js","Components/Base.js","Components/Circle.js","Components/Direction.js","Components/Output.js","Components/ShapeList.js","Components/ShortKeys.js","Components/Playground.js","Components/Square.js","mocks/shapes.js","App.js","reportWebVitals.js","index.js"],"names":["Anchor","lt","rt","rb","lb","this","pos","x","y","cloneShapeTypeFactory","source","Map","Circle","name","Square","Base","get","constructor","_","cloneDeep","toJSON","drawGrid","ctx","stepX","stepY","color","lineWidth","i","j","canvas","width","beginPath","moveTo","lineTo","height","strokeStyle","stroke","drawSelectAreaLine","start","end","closePath","generateId","id","parseStyle","styleText","backgroundImageReg","RegExp","backgroundSizeReg","backgroundPositionReg","backgroundImageItemReg","circleReg","circleColorReg","circleRadiusReg","squareReg","squareColorReg","exec","backgroundImage","backgroundSize","backgroundPosition","backgroundImageItem","match","shapes","ShapeList","replace","split","forEach","item","index","shape","radius","trim","Number","console","log","add","activeColor","isActive","isSelected","resizeDirection","Direction","anchor","origin","isInitial","active","selected","updateActiveStatus","minusX","minusY","updatePos","status","_calculateBoundary","l","t","r","b","props","updateSize","startPos","endPos","Math","min","max","extra","setLTRB","abs","direction","_calculateMaxAndMin","_setBoundary","save","fillStyle","arc","PI","fill","rect","restore","setCursorType","Output","onClick","onSetShapes","defaultValue","text","style","useState","data","setData","code","window","prompt","innerHeight","position","className","backgroundRepeat","outputStyle","activeShape","selectedShapes","isDisableActiveShapes","setOrigin","bool","isMultiple","setSelected","isShapeOnArea","getSelectedShapes","newShapes","activeShapes","isCursorOnShape","push","length","shapeToActive","resetShapeStatus","toggleSelected","resetSelectedShapes","filter","getAnchorPoint","concat","group","maxWidth","maxHeight","getSpaceTakenUp","trimGap","unshift","join","clearRect","render","findIndex","selectedShape","ShortKeys","Shapes","copiedShape","event","metaKey","throttle","bind","handler","preventDefault","stopPropagation","addEventListener","_handleKeyDown","removeEventListener","copiedShapes","isGroupReachBoundary","hasSelectedShape","delete","copy","_isReachBoundary","Playground","canvasRef","useRef","isShapeMoving","_handleMouseMove","target","getBoundingClientRect","clientX","clientY","current","getContext","calculateActiveShape","getActiveSide","cursor","useEffect","shortKeys","setShortKeys","removeShortKeys","ref","onMouseMove","onMouseDown","getActiveShape","setOriginActiveShape","setSelectedShapes","_move","e","setDisableActiveShapes","resize","document","_up","removeOriginActiveShape","selectShapesOnActiveArea","App","demoShapes","setShapes","display","_shapes","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.c626fceb.chunk.js","sourcesContent":["class Anchor {\n  constructor({ lt = {}, rt = {}, rb = {}, lb = {} } = {}) {\n    this.lt = lt;\n    this.rt = rt;\n    this.rb = rb;\n    this.lb = lb;\n  }\n  setLTRB({ lt = {}, rt = {}, rb = {}, lb = {} } = {}) {\n    this.lt = lt;\n    this.rt = rt;\n    this.rb = rb;\n    this.lb = lb;\n  }\n  updateL(pos = { x: 0, y: 0 }) {\n    this.lt = pos;\n  }\n  updateT(pos = { x: 0, y: 0 }) {\n    this.lt = pos;\n  }\n  updateR(pos = { x: 0, y: 0 }) {\n    this.lt = pos;\n  }\n  updateB(pos = { x: 0, y: 0 }) {\n    this.lt = pos;\n  }\n}\n\nexport default Anchor;\n","import _ from \"lodash\";\nimport { Base, Circle, Square } from \"../Components\";\n\nfunction cloneShapeTypeFactory(source) {\n  const ShapesMap = new Map([\n    [Circle.name, Circle],\n    [Square.name, Square],\n    [Base.name, Base],\n  ]);\n  let ShapeClass = ShapesMap.get(source.constructor.name);\n  let params = _.cloneDeep(source.toJSON());\n  return new ShapeClass(params);\n}\n\nexport default cloneShapeTypeFactory;\n","function drawGrid(\n  ctx,\n  stepX = 10,\n  stepY = 10,\n  color = \"lightgray\",\n  lineWidth = 0.5\n) {\n  ctx.lineWidth = lineWidth;\n\n  for (let i = lineWidth, j = 0; i < ctx.canvas.width; i += stepX, j++) {\n    ctx.beginPath();\n    ctx.moveTo(i, 0);\n    ctx.lineTo(i, ctx.canvas.height);\n    if (j % 5 === 0) {\n      ctx.strokeStyle = \"darkgrey\";\n    } else {\n      ctx.strokeStyle = color;\n    }\n    ctx.stroke();\n  }\n\n  for (let i = lineWidth, j = 0; i < ctx.canvas.height; i += stepY, j++) {\n    ctx.beginPath();\n    ctx.moveTo(0, i);\n    ctx.lineTo(ctx.canvas.width, i);\n    if (j % 5 === 0) {\n      ctx.strokeStyle = \"darkgrey\";\n    } else {\n      ctx.strokeStyle = color;\n    }\n    ctx.stroke();\n  }\n}\n\nexport default drawGrid;\n","function drawSelectAreaLine(ctx, start = { x: 0, y: 0 }, end = { x: 0, y: 0 }) {\n  ctx.beginPath();\n  ctx.strokeStyle = \"#59c7f9\";\n  ctx.moveTo(start.x, start.y);\n  ctx.lineTo(end.x, start.y);\n  ctx.lineTo(end.x, end.y);\n  ctx.lineTo(start.x, end.y);\n  ctx.closePath();\n  ctx.stroke();\n}\n\nexport default drawSelectAreaLine;\n","const generateId = (function () {\n  let id = 0;\n  return function () {\n    return id++;\n  };\n})();\n\nexport default generateId;\n","/* eslint-disable no-unused-vars */\nimport { Circle, ShapeList, Square } from \"../Components\";\n\nconst TypeMap = new Map([\n  [\"linear-gradient\", Square],\n  [\"radial-gradient\", Circle],\n]);\n\nfunction parseStyle(styleText = \"\") {\n  const backgroundImageReg = new RegExp(\n    /background-image:\\s?([0-9a-z\\-\\s#(),%]*);/gi\n  );\n  const backgroundSizeReg = new RegExp(/background-size:\\s?([0-9a-z\\s,%]*);/gi);\n  const backgroundPositionReg = new RegExp(\n    /background-position:\\s?([0-9a-z\\s,%]*);/gi\n  );\n  const backgroundImageItemReg = new RegExp(\n    /(linear|radial)-gradient\\(([\\s0-9a-z%,#]*)\\){1}/gi\n  );\n  const circleReg = new RegExp(/radial-gradient\\(([\\s0-9a-z%,#]*)\\){1}/gi);\n  const circleColorReg = new RegExp(/,\\s?[0-9a-z#]*\\s\\d/gi); //取第一个\n  const circleRadiusReg = new RegExp(/circle\\s([0-9a-z]*)\\sat/gi);\n  const squareReg = new RegExp(/linear-gradient\\(([\\s0-9a-z%,#]*)\\){1}/gi);\n  const squareColorReg = new RegExp(/inear-gradient\\(\\s?([0-9a-z#]*)\\s\\d/gi);\n\n  let [backgroundImageStyle = \"\", backgroundImage = \"\"] =\n    backgroundImageReg.exec(styleText) || [];\n  let [backgroundSizeStyle = \"\", backgroundSize = \"\"] =\n    backgroundSizeReg.exec(styleText) || [];\n  let [backgroundPositionStyle = \"\", backgroundPosition = \"\"] =\n    backgroundPositionReg.exec(styleText) || [];\n  let backgroundImageItem = backgroundImage.match(backgroundImageItemReg) || [];\n\n  const shapes = new ShapeList();\n\n  backgroundPosition = backgroundPosition.replace(/[^\\d^\\s,]/g, \"\").split(\",\");\n  backgroundSize = backgroundSize.replace(/[^\\d^\\s,]/g, \"\").split(\",\");\n  backgroundImageItem.forEach((item, index) => {\n    let shape;\n    if (item.match(circleReg)) {\n      let [color = \"\"] = item.match(circleColorReg) || [];\n      let [radius] = item.match(circleRadiusReg) || [];\n      let [x, y] = backgroundPosition[index].trim().split(/\\s/);\n      radius = Number(radius.replace(/[^\\d]/g, \"\"));\n      shape = new Circle({\n        color: color.replace(/,|\\d|\\s/g, \"\"),\n        pos: {\n          x: Number(x) + radius,\n          y: Number(y) + radius,\n        },\n        radius: radius,\n      });\n    }\n    if (item.match(squareReg)) {\n      let [color = \"\"] = item.match(squareColorReg) || [];\n      let [x, y] = backgroundPosition[index].trim().split(/\\s/);\n      let [width, height] = backgroundSize[index].trim().split(/\\s/);\n      shape = new Square({\n        color: color.replace(/,|\\d|\\s|inear-gradient\\(/g, \"\"),\n        pos: {\n          x: Number(x),\n          y: Number(y),\n        },\n        width: Number(width),\n        height: Number(height),\n      });\n      console.log(shape);\n    }\n    shapes.add(shape);\n  });\n  return shapes;\n}\n\nexport default parseStyle;\n","import { cloneShapeTypeFactory, generateId } from \"../Utils\";\nimport { Anchor, Direction } from \"./\";\n\nclass Base {\n  constructor({\n    color = \"lightgray\",\n    activeColor = \"rgb(89 199 249)\",\n    pos = { x: 0, y: 0 },\n    isActive = false,\n    isSelected = false,\n  } = {}) {\n    this.id = generateId();\n    this.pos = pos;\n    this.color = color;\n    this.activeColor = activeColor;\n    this.isActive = isActive;\n    this.isSelected = isSelected;\n    this.resizeDirection = new Direction();\n    this.anchor = new Anchor();\n    this.lineWidth = 2;\n    this.origin = null;\n  }\n  setOrigin(isInitial = true) {\n    this.origin = null;\n    if (isInitial) {\n      this.origin = cloneShapeTypeFactory(this);\n    }\n  }\n  setActive(active = true) {\n    this.isActive = active;\n  }\n  setSelected(selected = true) {\n    this.isSelected = selected;\n  }\n  toggleSelected() {\n    this.isSelected = !this.isSelected;\n    this.updateActiveStatus(this.isSelected);\n    console.log(this.isActive, this.isSelected);\n  }\n  movePos(minusX = 0, minusY = 0) {\n    this.updatePos({\n      x: this.pos.x - minusX,\n      y: this.pos.y - minusY,\n    });\n  }\n  updatePos(pos = { x: 0, y: 0 }) {\n    this.pos = pos;\n  }\n  updateActiveStatus(status = false) {\n    this.isActive = status;\n  }\n  updateSize() {}\n  resize() {}\n  isCursorOnShape() {}\n  isShapeOnArea() {}\n  getActiveSide() {}\n  _calculateBoundary(ctx) {\n    let x = this.pos.x;\n    let y = this.pos.y;\n    return [new Direction(), { x, y }];\n  }\n  _setBoundary(ctx) {\n    const [{ l, t, r, b }, pos] = this._calculateBoundary(ctx);\n    if (l || t || r || b) {\n      this.updatePos(pos);\n    }\n  }\n  getAnchorPoint() {}\n  render() {}\n  parseStyle() {\n    return ``;\n  }\n  toJSON() {\n    return {};\n  }\n}\n\nexport default Base;\n","import Base from \"./Base\";\n\nclass Circle extends Base {\n  constructor(props) {\n    super(props);\n    this.radius = props.radius;\n  }\n  resize(pos = {}) {\n    if (!this.origin) {\n      return;\n    }\n    const { l, t, r, b } = this.origin.resizeDirection;\n    if (l) {\n      this.updateSize({\n        radius: this.origin.radius + (this.origin.pos.x - pos.x),\n      });\n    }\n    if (t) {\n      this.updateSize({\n        radius: this.origin.radius + (this.origin.pos.y - pos.y),\n      });\n    }\n    if (r) {\n      this.updateSize({\n        radius: this.origin.radius + (pos.x - this.origin.pos.x),\n      });\n    }\n    if (b) {\n      this.updateSize({\n        radius: this.origin.radius + (pos.y - this.origin.pos.y),\n      });\n    }\n  }\n  updatePos(pos) {\n    if (pos.x - this.radius <= 0) {\n      this.pos.x = this.radius;\n      return;\n    }\n    if (pos.y - this.radius <= 0) {\n      this.pos.y = this.radius;\n      return;\n    }\n    super.updatePos(pos);\n  }\n  updateSize({ radius = 0 } = {}) {\n    this.radius = radius;\n  }\n  isCursorOnShape({ x = 0, y = 0 }) {\n    return (\n      !(x <= this.pos.x - this.radius || x >= this.pos.x + this.radius) &&\n      !(y <= this.pos.y - this.radius || y >= this.pos.y + this.radius)\n    );\n  }\n  isShapeOnArea(startPos = { x: 0, y: 0 }, endPos = { x: 0, y: 0 }) {\n    return (\n      !(\n        Math.min(startPos.x, endPos.x) > this.pos.x + this.radius ||\n        Math.max(startPos.x, endPos.x) < this.pos.x\n      ) &&\n      !(\n        Math.min(startPos.y, endPos.y) > this.pos.y + this.radius ||\n        Math.max(startPos.y, endPos.y) < this.pos.y\n      )\n    );\n  }\n  getActiveSide({ x = 0, y = 0 }, extra = 0) {\n    this.resizeDirection.setLTRB({\n      l: Math.abs(x - this.pos.x + this.radius) < this.lineWidth + extra,\n      r: Math.abs(x - this.pos.x - this.radius) < this.lineWidth + extra,\n      t: Math.abs(y - this.pos.y + this.radius) < this.lineWidth + extra,\n      b: Math.abs(y - this.pos.y - this.radius) < this.lineWidth + extra,\n    });\n    return (\n      Math.abs(x - this.pos.x - this.radius) < this.lineWidth + extra ||\n      Math.abs(x - this.pos.x + this.radius) < this.lineWidth + extra ||\n      Math.abs(y - this.pos.y - this.radius) < this.lineWidth + extra ||\n      Math.abs(y - this.pos.y + this.radius) < this.lineWidth + extra\n    );\n  }\n  _calculateBoundary(ctx) {\n    let [direction, { x, y }] = super._calculateBoundary(ctx);\n    const width = ctx.canvas.width,\n      height = ctx.canvas.height;\n    direction.setLTRB({\n      l: this.pos.x - this.radius <= 0,\n      t: this.pos.y - this.radius <= 0,\n      r: this.pos.x + this.radius >= width,\n      b: this.pos.y + this.radius >= height,\n    });\n    const { l, t, r, b } = direction;\n    if (l) {\n      x = this.radius;\n    }\n    if (t) {\n      y = this.radius;\n    }\n    if (r) {\n      x = ctx.canvas.width - this.radius;\n    }\n    if (b) {\n      y = ctx.canvas.height - this.radius;\n    }\n    return [direction, { x, y }];\n  }\n  _calculateMaxAndMin(ctx) {\n    if (!this.origin) {\n      return;\n    }\n    if (this.pos.x - this.radius <= 0) {\n      this.radius = this.pos.x;\n    }\n    if (this.pos.y - this.radius <= 0) {\n      this.radius = this.pos.y;\n    }\n\n    if (\n      this.radius * 2 >= ctx.canvas.width ||\n      this.radius * 2 >= ctx.canvas.height\n    ) {\n      this.radius = ctx.canvas.width / 2;\n    }\n    if (this.radius <= 10) {\n      this.radius = 10;\n    }\n  }\n  getAnchorPoint() {\n    this.anchor.setLTRB({\n      lt: { x: this.pos.x - this.radius, y: this.pos.y - this.radius },\n      rt: { x: this.pos.x + this.radius, y: this.pos.y - this.radius },\n      rb: { x: this.pos.x + this.radius, y: this.pos.y + this.radius },\n      lb: { x: this.pos.x - this.radius, y: this.pos.y + this.radius },\n    });\n    return this.anchor;\n  }\n  render(ctx = {}) {\n    this._calculateMaxAndMin(ctx);\n    this._setBoundary(ctx);\n    ctx.save();\n    ctx.lineWidth = this.lineWidth;\n    ctx.strokeStyle = this.color;\n    ctx.fillStyle = this.color;\n    ctx.beginPath();\n    ctx.arc(this.pos.x, this.pos.y, this.radius, 0, 2 * Math.PI);\n    ctx.closePath();\n    ctx.fill();\n\n    if (this.isSelected) {\n      ctx.save();\n      ctx.strokeStyle = this.activeColor;\n      ctx.beginPath();\n      ctx.rect(\n        this.pos.x - this.radius,\n        this.pos.y - this.radius,\n        this.radius * 2,\n        this.radius * 2\n      );\n      ctx.closePath();\n      ctx.stroke();\n    }\n    ctx.restore();\n  }\n  parseStyle({ x = 0, y = 0 } = {}) {\n    return {\n      backgroundImage: `radial-gradient( circle ${this.radius}px at ${this.radius}px ${this.radius}px, ${this.color} 100%, transparent 0 )`,\n      backgroundPosition: `${this.pos.x - this.radius - x}px ${\n        this.pos.y - this.radius - y\n      }px`,\n      backgroundSize: `${this.radius * 2}px ${this.radius * 2}px`,\n    };\n  }\n  toJSON() {\n    return {\n      pos: this.pos,\n      color: this.color,\n      activeColor: this.activeColor,\n      isActive: this.isActive,\n      isSelected: this.isSelected,\n      radius: this.radius,\n    };\n  }\n}\n\nexport default Circle;\n","class Direction {\n  constructor({ l = false, t = false, r = false, b = false } = {}) {\n    this.l = l;\n    this.t = t;\n    this.r = r;\n    this.b = b;\n  }\n  setLTRB({ l = false, t = false, r = false, b = false } = {}) {\n    this.l = l;\n    this.t = t;\n    this.r = r;\n    this.b = b;\n    this.setCursorType();\n  }\n  setCursorType() {\n    this.direction = \"\";\n    if (this.l || this.r) {\n      this.direction = \"ew\";\n    }\n    if (this.t || this.b) {\n      this.direction = \"ns\";\n    }\n  }\n}\n\nexport default Direction;\n","import { useState } from \"react\";\nimport { parseStyle } from \"../Utils\";\n\nconst Output = function ({\n  onClick = function () {},\n  onSetShapes = function () {},\n}) {\n  const defaultValue = {\n    text: \"\",\n    style: {},\n    width: \"100%\",\n    height: \"100%\",\n  };\n  const [data, setData] = useState(defaultValue);\n  const outputStyle = function (text = \"\") {\n    return `\n        width: ${data.width},\n        height: ${data.height},\n        overflow: hidden;\n        background-repeat: \"no-repeat\",\n        position: \"relative\",${text}\n        &:before {\n            content: \"\";\n            width: 100%;\n            height: 100%;\n            display: inline-block;\n            position: relative;\n            top: 0;\n            left: -100%;\n            background-image: linear-gradient(\n              100deg,\n              rgba(255, 255, 255, 0),\n              rgba(255, 255, 255, 0.5) 50%,\n              rgba(255, 255, 255, 0) 80%\n            );\n            animation: shine 1s infinite;\n        }\n        @keyframes shine {\n            to {\n              left: 100%;\n            }\n        }\n    `;\n  };\n  return (\n    <>\n      <button\n        onClick={() => {\n          const data = onClick();\n          console.log(data);\n          setData(data);\n        }}\n      >\n        输出\n      </button>\n      <button\n        onClick={() => {\n          setData(defaultValue);\n        }}\n      >\n        清空\n      </button>\n      <button\n        onClick={() => {\n          let code = window.prompt(\"请填入样式代码\") || \"\";\n          code = code.replace(/\\r|\\n|\\s{2}/g, \"\");\n          if (code) {\n            onSetShapes(parseStyle(code));\n          }\n        }}\n      >\n        导入\n      </button>\n      <div\n        style={{\n          width: 800,\n          height: window.innerHeight,\n          position: \"relative\",\n          //   backgroundColor: \"green\",\n        }}\n      >\n        <div\n          className=\"output\"\n          style={{\n            ...data.style,\n            width: data.width,\n            height: data.height,\n            backgroundRepeat: \"no-repeat\",\n            position: \"relative\",\n          }}\n        ></div>\n        <pre>\n          <code>{data.text && outputStyle(data.text)}</code>\n        </pre>\n      </div>\n    </>\n  );\n};\n\nexport default Output;\n","import { drawGrid } from \"../Utils\";\nimport Anchor from \"./Anchor\";\nimport Base from \"./Base\";\n\nclass ShapeList {\n  constructor(shapes = []) {\n    this.shapes = shapes;\n    this.activeShape = new Base();\n    this.selectedShapes = [];\n    this.isDisableActiveShapes = false;\n  }\n  setOriginActiveShape() {\n    this.activeShape.setOrigin(true);\n  }\n  removeOriginActiveShape() {\n    this.activeShape.setOrigin(false);\n  }\n  setDisableActiveShapes(bool = true) {\n    this.isDisableActiveShapes = bool;\n  }\n  selectShapesOnActiveArea(\n    startPos = { x: 0, y: 0 },\n    endPos = { x: 0, y: 0 },\n    isMultiple = false\n  ) {\n    isMultiple &&\n      this.shapes.forEach((shape) => {\n        shape.setSelected(shape.isShapeOnArea(startPos, endPos));\n      });\n    isMultiple && this.getSelectedShapes();\n  }\n  updatePos(minusX = 0, minusY = 0) {\n    this.getSelectedShapes().forEach((shape) => {\n      //todo multiple shape move\n    });\n  }\n  updateShapes(newShapes = []) {\n    this.shapes = newShapes;\n  }\n  calculateActiveShape(ctx = {}, { x = 0, y = 0 }) {\n    const activeShapes = [];\n    this.activeShape = new Base();\n    if (!this.isDisableActiveShapes) {\n      this.shapes.forEach((shape) => {\n        shape.updateActiveStatus(false);\n        if (shape.isCursorOnShape({ x, y })) {\n          activeShapes.push(shape);\n        }\n      });\n    }\n    if (activeShapes.length) {\n      let activeShape = activeShapes[activeShapes.length - 1];\n      activeShape.updateActiveStatus(true);\n      this.activeShape = activeShape;\n    }\n    return this.activeShape;\n  }\n\n  setActiveShape(shapeToActive) {\n    this.resetShapeStatus();\n    shapeToActive.updateActiveStatus(true);\n    this.activeShape = shapeToActive;\n  }\n\n  resetShapeStatus() {\n    this.shapes.forEach((shape) => {\n      shape.updateActiveStatus(false);\n    });\n  }\n\n  getActiveShape() {\n    return this.activeShape;\n  }\n  hasActiveShape() {\n    return this.activeShape.constructor.name !== \"Base\";\n  }\n\n  hasSelectedShape() {\n    return this.getSelectedShapes().length > 0;\n  }\n\n  setSelectedShapes(isMultiple = false) {\n    if (isMultiple) {\n      this.activeShape.toggleSelected();\n    } else {\n      this.resetSelectedShapes();\n      this.activeShape.setSelected();\n    }\n    this.selectedShapes = this.getSelectedShapes();\n  }\n  getSelectedShapes() {\n    this.selectedShapes = this.shapes.filter((shape) => shape.isSelected);\n    return this.selectedShapes;\n  }\n  resetSelectedShapes() {\n    this.shapes.forEach((shape) => {\n      shape.setSelected(false);\n    });\n  }\n\n  getSpaceTakenUp(shapes = []) {\n    let x = [];\n    let y = [];\n    shapes.forEach((shape) => {\n      const { lt, rt, lb } = shape.getAnchorPoint();\n      x = x.concat([lt.x, rt.x]);\n      y = y.concat([lt.y, lb.y]);\n    });\n    return {\n      anchor: new Anchor({\n        lt: { x: Math.min(...x), y: Math.min(...y) },\n        rt: { x: Math.max(...x), y: Math.min(...y) },\n        rb: { x: Math.max(...x), y: Math.max(...y) },\n        lb: { x: Math.min(...x), y: Math.max(...y) },\n      }),\n      width: Math.max(...x) - Math.min(...x),\n      height: Math.max(...y) - Math.min(...y),\n    };\n  }\n\n  isGroupReachBoundary(group = [], maxWidth = 0, maxHeight = 0) {\n    const { anchor } = this.getSpaceTakenUp(group);\n    return (\n      Math.min(anchor.lb.x, anchor.lt.x, anchor.rb.x, anchor.rt.x) < 0 ||\n      Math.min(anchor.lb.y, anchor.lt.y, anchor.rb.y, anchor.rt.y) < 0 ||\n      Math.max(anchor.lb.x, anchor.lt.x, anchor.rb.x, anchor.rt.x) > maxWidth ||\n      Math.max(anchor.lb.y, anchor.lt.y, anchor.rb.y, anchor.rt.y) > maxHeight\n    );\n  }\n\n  parseStyle(trim = false) {\n    let backgroundImage = [];\n    let backgroundPosition = [];\n    let backgroundSize = [];\n    const {\n      anchor: { lt },\n      width,\n      height,\n    } = this.getSpaceTakenUp(this.shapes);\n    const trimGap = trim ? { x: 0, y: 0 } : lt;\n    this.shapes.forEach((shape) => {\n      const style = shape.parseStyle(trim ? lt : {});\n      backgroundImage.unshift(style.backgroundImage);\n      backgroundPosition.unshift(style.backgroundPosition);\n      backgroundSize.unshift(style.backgroundSize);\n    });\n    return {\n      text: `\n        background-image: ${backgroundImage.join(\",\")};\n        background-position: ${backgroundPosition.join(\",\")};\n        background-size: ${backgroundSize.join(\",\")};    \n            `,\n      style: {\n        backgroundImage: backgroundImage.join(\",\"),\n        backgroundPosition: backgroundPosition.join(\",\"),\n        backgroundSize: backgroundSize.join(\",\"),\n      },\n      width: `${width + trimGap.x}px`,\n      height: `${height + trimGap.y}px`,\n    };\n  }\n  render(ctx) {\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n    drawGrid(ctx);\n    this.shapes.forEach((shape) => {\n      shape.render(ctx);\n    });\n  }\n  copy(shapes = []) {\n    this.resetSelectedShapes();\n    this.shapes = this.shapes.concat(shapes);\n  }\n  delete(selectedShapes = [new Base()]) {\n    this.shapes = this.shapes.filter((shape) => {\n      return (\n        selectedShapes.findIndex(\n          (selectedShape) => selectedShape.id === shape.id\n        ) < 0\n      );\n    });\n  }\n  add(shape = new Base()) {\n    return this.shapes.unshift(shape);\n  }\n}\n\nexport default ShapeList;\n","import _ from \"lodash\";\nimport { cloneShapeTypeFactory } from \"../Utils\";\nimport Shapes from \"./ShapeList\";\n\nclass ShortKeys {\n  constructor({ ctx, shapes = new Shapes() }) {\n    this.ctx = ctx;\n    this.shapes = shapes;\n    this.copiedShape = null;\n  }\n  _handleKeyDown(event) {\n    if (this[event.code] && event.metaKey) {\n      const handler = _.throttle(this[event.code].bind(this), 50);\n      handler(event);\n      this.shapes.render(this.ctx);\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n  setShortKeys() {\n    window.addEventListener(\"keydown\", this._handleKeyDown.bind(this), false);\n  }\n  removeShortKeys() {\n    window.removeEventListener(\n      \"keydown\",\n      this._handleKeyDown.bind(this),\n      false\n    );\n    this.copiedShapes = [];\n  }\n  _isReachBoundary() {\n    return this.shapes.isGroupReachBoundary(\n      this.shapes.getSelectedShapes(),\n      this.ctx.canvas.width,\n      this.ctx.canvas.height\n    );\n  }\n  Backspace(event) {\n    this.shapes.hasSelectedShape() &&\n      this.shapes.delete(this.shapes.getSelectedShapes());\n  }\n  KeyC(event) {\n    if (this.shapes.hasSelectedShape()) {\n      this.copiedShapes = this.shapes.getSelectedShapes();\n    }\n  }\n  KeyV(event) {\n    if (this.copiedShapes.length) {\n      const shapes = [];\n      this.copiedShapes.forEach((copiedShape) => {\n        const shape = cloneShapeTypeFactory(copiedShape);\n        shape.pos.x += 10;\n        shape.pos.y += 10;\n        shapes.push(shape);\n      });\n      this.shapes.copy(shapes);\n      this.copiedShapes = shapes;\n    }\n  }\n  ArrowUp(event) {\n    !this._isReachBoundary() &&\n      this.shapes.getSelectedShapes().forEach((shape) => {\n        shape.pos.y -= 1;\n      });\n  }\n  ArrowRight(event) {\n    !this._isReachBoundary() &&\n      this.shapes.getSelectedShapes().forEach((shape) => {\n        shape.pos.x += 1;\n      });\n  }\n  ArrowDown(event) {\n    !this._isReachBoundary() &&\n      this.shapes.getSelectedShapes().forEach((shape) => {\n        shape.pos.y += 1;\n      });\n  }\n  ArrowLeft(event) {\n    !this._isReachBoundary() &&\n      this.shapes.getSelectedShapes().forEach((shape) => {\n        shape.pos.x -= 1;\n        if (shape.pos.x === 0) {\n          return;\n        }\n      });\n  }\n}\n\nexport default ShortKeys;\n","import _ from \"lodash\";\nimport { useEffect, useRef } from \"react\";\nimport { drawSelectAreaLine } from \"../Utils\";\nimport Shapes from \"./ShapeList\";\nimport ShortKeys from \"./ShortKeys\";\n\nfunction Playground({ shapes = new Shapes() }) {\n  const canvasRef = useRef();\n  let isShapeMoving = false;\n\n  const _handleMouseMove = _.throttle(function (event) {\n    const { x, y } = event.target.getBoundingClientRect();\n    const { clientX, clientY } = event;\n    const ctx = canvasRef.current.getContext(\"2d\");\n    const startPos = {\n      x: clientX - x,\n      y: clientY - y,\n    };\n    let activeShape = shapes.calculateActiveShape(ctx, startPos);\n    if (isShapeMoving) {\n      return;\n    }\n    if (activeShape.getActiveSide(startPos, 2)) {\n      canvasRef.current.style.cursor =\n        activeShape.resizeDirection.direction + \"-resize\";\n    } else if (activeShape.isActive) {\n      canvasRef.current.style.cursor = \"move\";\n    } else {\n      canvasRef.current.style.cursor = \"default\";\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }, 50);\n\n  const _handleMouseDown = function (event) {\n    event.preventDefault();\n    event.stopPropagation();\n    const { x, y } = event.target.getBoundingClientRect();\n    const { clientX, clientY } = event;\n    const ctx = canvasRef.current.getContext(\"2d\");\n    const startPos = {\n      x: clientX - x,\n      y: clientY - y,\n    };\n    let activeShape = shapes.getActiveShape();\n\n    let minusX = 0;\n    let minusY = 0;\n\n    let isActive = activeShape.isActive;\n\n    shapes.setOriginActiveShape();\n\n    if (isActive) {\n      minusX = clientX - activeShape.pos.x - x;\n      minusY = clientY - activeShape.pos.y - y;\n    }\n\n    shapes.setSelectedShapes(event.metaKey);\n\n    const _move = function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n      const endPos = {\n        x: e.clientX - x - minusX,\n        y: e.clientY - y - minusY,\n      };\n      if (!isActive) {\n        shapes.setDisableActiveShapes();\n        shapes.render(ctx);\n        drawSelectAreaLine(ctx, startPos, endPos);\n        return;\n      }\n      isShapeMoving = true;\n\n      if (activeShape.origin && activeShape.origin.getActiveSide(startPos, 2)) {\n        activeShape.resize(endPos, activeShape.origin);\n      } else {\n        activeShape.updatePos(endPos);\n      }\n      shapes.render(ctx);\n    };\n    const _up = function (e) {\n      const endPos = {\n        x: e.clientX - x - minusX,\n        y: e.clientY - y - minusY,\n      };\n      document.removeEventListener(\"mousemove\", _move);\n      document.removeEventListener(\"mouseup\", _up);\n      isShapeMoving = false;\n      shapes.removeOriginActiveShape();\n      shapes.setDisableActiveShapes(false);\n      shapes.selectShapesOnActiveArea(startPos, endPos, !isActive);\n      shapes.render(ctx);\n      console.log(shapes.getSelectedShapes(), isActive);\n    };\n    document.addEventListener(\"mousemove\", _move);\n    document.addEventListener(\"mouseup\", _up);\n  };\n\n  useEffect(() => {\n    const $canvas = canvasRef.current;\n    const ctx = $canvas.getContext(\"2d\");\n    shapes.render(ctx);\n  });\n\n  useEffect(() => {\n    const $canvas = canvasRef.current;\n    const ctx = $canvas.getContext(\"2d\");\n    let shortKeys = new ShortKeys({ ctx, shapes: shapes });\n    shortKeys.setShortKeys();\n    return shortKeys.removeShortKeys();\n  });\n  return (\n    <canvas\n      width={800}\n      height={window.innerHeight}\n      ref={canvasRef}\n      style={{ width: 800, height: window.innerHeight }}\n      onMouseMove={_handleMouseMove}\n      onMouseDown={_handleMouseDown}\n    />\n  );\n}\n\nexport default Playground;\n","import Base from \"./Base\";\n\nclass Square extends Base {\n  constructor(props) {\n    super(props);\n    this.width = props.width;\n    this.height = props.height;\n  }\n  resize(pos = {}) {\n    if (!this.origin) {\n      return;\n    }\n    const { l, t, r, b } = this.origin.resizeDirection;\n    if (l) {\n      this.updateSize({\n        width: this.origin.width + (this.origin.pos.x - pos.x),\n        height: this.origin.height,\n      });\n      this.updatePos({\n        x: pos.x,\n        y: this.origin.pos.y,\n      });\n    }\n    if (t) {\n      this.updateSize({\n        width: this.origin.width,\n        height: this.origin.height + (this.origin.pos.y - pos.y),\n      });\n      this.updatePos({\n        x: this.origin.pos.x,\n        y: pos.y,\n      });\n    }\n    if (r) {\n      this.updateSize({\n        width: this.origin.width + (pos.x - this.origin.pos.x),\n        height: this.origin.height,\n      });\n    }\n    if (b) {\n      this.updateSize({\n        width: this.origin.width,\n        height: this.origin.height + (pos.y - this.origin.pos.y),\n      });\n    }\n  }\n  updateSize({ width = 0, height = 0 } = {}) {\n    this.width = width;\n    this.height = height;\n  }\n  isCursorOnShape({ x = 0, y = 0 }) {\n    return (\n      !(x <= this.pos.x || x >= this.pos.x + this.width) &&\n      !(y <= this.pos.y || y >= this.pos.y + this.height)\n    );\n  }\n  isShapeOnArea(startPos = { x: 0, y: 0 }, endPos = { x: 0, y: 0 }) {\n    return (\n      !(\n        Math.min(startPos.x, endPos.x) > this.pos.x + this.width ||\n        Math.max(startPos.x, endPos.x) < this.pos.x\n      ) &&\n      !(\n        Math.min(startPos.y, endPos.y) > this.pos.y + this.height ||\n        Math.max(startPos.y, endPos.y) < this.pos.y\n      )\n    );\n  }\n  getActiveSide({ x = 0, y = 0 }, extra = 0) {\n    this.resizeDirection.setLTRB({\n      l: Math.abs(x - this.pos.x) < this.lineWidth + extra,\n      r: Math.abs(x - this.pos.x - this.width) < this.lineWidth + extra,\n      t: Math.abs(y - this.pos.y) < this.lineWidth + extra,\n      b: Math.abs(y - this.pos.y - this.height) < this.lineWidth + extra,\n    });\n    return (\n      Math.abs(x - this.pos.x) < this.lineWidth + extra ||\n      Math.abs(x - this.pos.x - this.width) < this.lineWidth + extra ||\n      Math.abs(y - this.pos.y) < this.lineWidth + extra ||\n      Math.abs(y - this.pos.y - this.height) < this.lineWidth + extra\n    );\n  }\n  _calculateBoundary(ctx) {\n    let [direction, { x, y }] = super._calculateBoundary(ctx);\n    const width = ctx.canvas.width,\n      height = ctx.canvas.height;\n    direction.setLTRB({\n      l: this.pos.x <= 0,\n      t: this.pos.y <= 0,\n      r: this.pos.x + this.width >= width,\n      b: this.pos.y + this.height >= height,\n    });\n    const { l, t, r, b } = direction;\n    if (l) {\n      x = 0;\n    }\n    if (t) {\n      y = 0;\n    }\n    if (r) {\n      x = ctx.canvas.width - this.width;\n    }\n    if (b) {\n      y = ctx.canvas.height - this.height;\n    }\n    return [direction, { x, y }];\n  }\n  _calculateMaxAndMin(ctx) {\n    if (!this.origin) {\n      return;\n    }\n    const { l, t, r, b } = this.origin.resizeDirection;\n    if (r && this.pos.x + this.width >= ctx.canvas.width) {\n      this.width = ctx.canvas.width - this.pos.x;\n    }\n    if (b && this.pos.y + this.height >= ctx.canvas.height) {\n      this.height = ctx.canvas.height - this.pos.y;\n    }\n    if (l && this.origin.pos.x + this.origin.width <= this.width) {\n      this.width = this.origin.pos.x + this.origin.width;\n      this.pos.x = 0;\n    }\n    if (t && this.origin.pos.y + this.origin.height <= this.height) {\n      this.height = this.origin.pos.y + this.origin.height;\n      this.pos.y = 0;\n    }\n    if (this.width <= 10) {\n      this.width = 10;\n    }\n    if (this.height <= 10) {\n      this.height = 10;\n    }\n  }\n  getAnchorPoint() {\n    this.anchor.setLTRB({\n      lt: this.pos,\n      rt: { x: this.pos.x + this.width, y: this.pos.y },\n      rb: { x: this.pos.x + this.width, y: this.pos.y + this.height },\n      lb: { x: this.pos.x, y: this.pos.y + this.height },\n    });\n    return this.anchor;\n  }\n  render(ctx = {}) {\n    this._calculateMaxAndMin(ctx);\n    this._setBoundary(ctx);\n    ctx.save();\n    ctx.lineWidth = this.lineWidth;\n    ctx.strokeStyle = this.isSelected ? this.activeColor : this.color;\n    ctx.fillStyle = this.color;\n    ctx.beginPath();\n    ctx.rect(this.pos.x, this.pos.y, this.width, this.height);\n    ctx.closePath();\n    ctx.fill();\n    ctx.stroke();\n    ctx.restore();\n  }\n  parseStyle({ x = 0, y = 0 } = {}) {\n    return {\n      backgroundImage: `linear-gradient( ${this.color} 100%, transparent 0 )`,\n      backgroundPosition: `${this.pos.x - x}px ${this.pos.y - y}px`,\n      backgroundSize: `${this.width}px ${this.height}px`,\n    };\n  }\n  toJSON() {\n    return {\n      pos: this.pos,\n      color: this.color,\n      activeColor: this.activeColor,\n      isActive: this.isActive,\n      isSelected: this.isSelected,\n      width: this.width,\n      height: this.height,\n    };\n  }\n}\n\nexport default Square;\n","import { Circle, ShapeList, Square } from \"../Components\";\n\nexport default new ShapeList([\n  new Circle({\n    pos: { x: 100, y: 100 },\n    radius: 50,\n    color: \"red\",\n  }),\n  new Circle({\n    pos: { x: 300, y: 100 },\n    radius: 50,\n    color: \"blue\",\n  }),\n  new Square({\n    pos: { x: 200, y: 200 },\n    width: 100,\n    height: 100,\n    color: \"green\",\n  }),\n]);\n","import { useState } from \"react\";\nimport \"./App.scss\";\nimport { Output, Playground } from \"./Components\";\nimport demoShapes from \"./mocks/shapes\";\n\nfunction App() {\n  const [shapes, setShapes] = useState(demoShapes);\n  const _handleClick = function () {\n    return shapes.parseStyle(true);\n  };\n\n  const _handleSetShapes = function (_shapes) {\n    setShapes(_shapes);\n  };\n\n  return (\n    <div style={{ display: \"flex\" }}>\n      <Playground shapes={shapes} />\n      <Output onClick={_handleClick} onSetShapes={_handleSetShapes} />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.scss\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}